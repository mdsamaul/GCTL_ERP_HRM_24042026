@model GCTL.UI.Core.ViewModels.HRMTransportAssignEntry.HRMTransportAssignEntryViewModel

@{
    Model.Breadcrumb = "SalesDefVehicleType";
    Model.PageTitle = "Sales Def Vehicle Type";
}


<style>
    #stickyHeader {
        position: sticky;
        top: 0px;
        z-index: 1020;
        min-height: 50px;
        background: linear-gradient(to right, #fff, white);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        transition: box-shadow 0.3s ease-in-out;
        transition: all 0.5s ease-in-out;
    }

        #stickyHeader.scrolled {
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            padding-top: 7px;
            padding-bottom: 7px;
        }

    .transportLeft {
        width: 12vw;
        padding-right: 5px;
        white-space: nowrap;
    }

    .transportRight {
        width: 22vw;
    }

    input,
    select,
    textarea {
        border: 1px solid #eee !important;
    }

    .dataTables_wrapper .dataTables_filter input {
        border: 1px solid #ced4da;
        border-radius: 4px;
        padding: 4px 8px;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button {
        padding: 2px 8px;
        margin: 0 2px;
        border-radius: 4px;
        background-color: #f8f9fa;
    }

        .dataTables_wrapper .dataTables_paginate .paginate_button.current {
            background-color: #007bff;
            color: white !important;
        }

    #transportTable tbody tr td {
        padding: 2px 8px !important;
        font-size: 14px;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button {
        cursor: pointer !important;
        padding: 5px 10px;
        border-radius: 4px;
        margin: 2px;
        transition: background-color 0.3s;
        border: 1px solid #eee;
    }

        .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
            background-color: #e2e8f0;
            color: #000;
        }

    #transportTable td:first-child,
    #transportTable th:first-child {
        text-align: center;
        vertical-align: middle;
        width: 1%;
        white-space: nowrap;
    }

        #transportTable td:first-child input[type="checkbox"] {
            display: block;
            margin: 0 auto;
            cursor: pointer;
        }

    input.VehicleType-input {
        border: 1px solid red !important;
    }

    .multiselect {
        display: flex !important;
        align-items: center !important;
        justify-content: space-between !important;
        padding: 6px 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        background-color: #fff;
        cursor: pointer;
        border: 1px solid #eee !important;
    }

    .multiselect-container .input-group {
        flex-wrap: nowrap !important;
        border: 1px solid #eee;
        border-radius: 4px;
        margin: 5px 10px;
        padding: 2px 6px;
    }

    .multiselect-container {
        width: 100% !important;
        max-height: 300px;
        overflow-y: auto;
    }

        .multiselect-container li input[type="radio"] {
            display: none;
        }

        .multiselect-container li:not(.multiselect-group) a label {
            padding-left: 10px;
            cursor: pointer;
            display: block;
            width: 100%;
        }

        .multiselect-container > li {
            transition: background-color 0.2s ease-in-out;
        }

            .multiselect-container > li:hover {
                background: #f5f5f5;
            }


        .multiselect-container li a {
            display: block !important;
            width: 100%;
            padding: 6px 12px;
            color: #333;
            text-decoration: none;
        }

            .multiselect-container li a:hover {
                background-color: #e9ecef;
                color: #000;
            }

    /* Hide checkboxes inside multiselect dropdown */
    #DriverNameSelectEmpId + .btn-group .multiselect-container input[type="checkbox"] {
        display: none !important;
    }

    /* Remove extra padding caused by checkbox */
    #DriverNameSelectEmpId + .btn-group .multiselect-container .form-check-label {
        padding-left: 0 !important;
    }


    </style>

<div class="container-fluid">
    <partial name="_PageHeader" model="Model"></partial>
</div>

<div class="container-fluid">
    <div id="stickyHeader" class="card-header px-2 sticky-top rounded"
         style="min-height: 50px; z-index: 1020;">
        <partial name="_Toolbars" model="new ToobarModel(){Title=Model.Breadcrumb, Code=Model.Code , Name=Model.Setup.TAID }" />
    </div>
    <div class="card my-3 py-3">

        <div class="row">
            <div class="col-12 col-md-6">
                <div class="d-flex align-items-center">
                    <div class="transportLeft text-right">Driver. <span class="text-danger">*</span></div>
                    <div class="transportRight">
                        <select class="form-control-sm form-control form-select-sm form-select searchable-select" id="DriverSelectEmpId" asp-items="ViewBag.EmpDriverList as SelectList">
                            <option value="">--Select Employee--</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-6">
                <div class="d-flex align-items-center">
                    <div class="transportLeft text-right">Name: </div>
                    <div class="transportRight">
                       <span id="DEmpName"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row py-2">
            <div class="col-12 col-md-6">
                <div class="d-flex align-items-center">
                    <div class="transportLeft text-right">Designation: </div>
                    <div class="transportRight">
                        <span id="DEmpDesignation"></span>
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-6">
                <div class="d-flex align-items-center">
                    <div class="transportLeft text-right">Department:</div>
                    <div class="transportRight">
                        <span id="DEmpDepartment"> </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row ">
            <div class="col-12 col-md-6">
                <div class="d-flex align-items-center">
                    <div class="transportLeft text-right">Phone: </div>
                    <div class="transportRight">
                        <span id="DEmpPhone"></span>
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-6">
               
            </div>
        </div>
    </div>
    <div class="card my-3 py-3">
        <partial name="_Setup" model="Model.Setup" />
        <div class="row py-2">
            <div class="col-12 col-md-6">
                <hr />
                <div class="d-flex justify-content-center align-items-center">
                    Create Date:<span class="createDate ps-1"></span>
                </div>
            </div>
            <div class="col-12 col-md-6">
                <hr />
                <div class="d-flex justify-content-center align-items-center">
                    Last Update Date:<span class="updateDate ps-1"></span>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid">
    <div class="card p-2">
        <partial name="_Grid"></partial>
    </div>
</div>



@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <!-- Font Awesome 6 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">


    <!-- jQuery (load first) -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Bootstrap Multiselect (WORKING VERSION) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.15/css/bootstrap-multiselect.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.15/js/bootstrap-multiselect.min.js"></script>

    <!-- DataTable JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>

    <!-- Flatpickr CSS and JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <!-- Your custom script (load AFTER all dependencies) -->
    <script src="~/js/pages/HRMTransportAssignEntry.js"></script>

    <!-- Initialize with proper checking -->
    <script type="text/javascript">
        $(document).ready(function() {
            console.log('jQuery version:', $.fn.jquery);
            console.log('Multiselect available:', typeof $.fn.multiselect);

            // Wait a bit for all scripts to load
            setTimeout(function() {
                if (typeof $.fn.multiselect !== 'undefined') {
                    console.log('Multiselect plugin loaded successfully');
                    $.HRMTransportAssignEntryJs({
                        baseUrl: '@Url.Action("Index", "HRMTransportAssignEntry")',
                        load: function () {
                            console.log("Custom load logic called from Razor view");
                        }
                    });
                } else {
                    console.error('Bootstrap Multiselect plugin failed to load!');
                    alert('Error: Bootstrap Multiselect plugin failed to load. Please refresh the page.');
                }
            }, 500);
        });

        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';
        }
    </script>
}