@model GCTL.UI.Core.ViewModels.HRMTransportExpenseEntry.HRMTransportExpenseEntryViewModel
@{
	Model.Breadcrumb = "HRMTransportExpenseEntry";
	Model.PageTitle = "HRM Transport Expense Entry";
}


<style>
	#stickyHeader {
		position: sticky;
		top: 0px;
		z-index: 1020;
		min-height: 50px;
		background: linear-gradient(to right, #fff, white);
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
		transition: box-shadow 0.3s ease-in-out;
		transition: all 0.5s ease-in-out;
	}

		#stickyHeader.scrolled {
			box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
			padding-top: 7px;
			padding-bottom: 7px;
		}

	.transportLeft {
		width: 12vw;
		padding-right: 5px;
		white-space: nowrap;
	}

	.transportRight {
		width: 22vw;
	}

	input,
	select,
	textarea {
		border: 1px solid #eee !important;
	}

	.dataTables_wrapper .dataTables_filter input {
		border: 1px solid #ced4da;
		border-radius: 4px;
		padding: 4px 8px;
	}

	.dataTables_wrapper .dataTables_paginate .paginate_button {
		padding: 2px 8px;
		margin: 0 2px;
		border-radius: 4px;
		background-color: #f8f9fa;
	}

		.dataTables_wrapper .dataTables_paginate .paginate_button.current {
			background-color: #007bff;
			color: white !important;
		}

	#transportTable tbody tr td {
		padding: 2px 8px !important;
		font-size: 14px;
	}

	.dataTables_wrapper .dataTables_paginate .paginate_button {
		cursor: pointer !important;
		padding: 5px 10px;
		border-radius: 4px;
		margin: 2px;
		transition: background-color 0.3s;
		border: 1px solid #eee;
	}

		.dataTables_wrapper .dataTables_paginate .paginate_button:hover {
			background-color: #e2e8f0;
			color: #000;
		}

	#transportTable td:first-child,
	#transportTable th:first-child {
		text-align: center;
		vertical-align: middle;
		width: 1%;
		white-space: nowrap;
	}

		#transportTable td:first-child input[type="checkbox"] {
			display: block;
			margin: 0 auto;
			cursor: pointer;
		}

	input.VehicleType-input {
		border: 1px solid red !important;
	}

	.multiselect {
		display: flex !important;
		align-items: center !important;
		justify-content: space-between !important;
		padding: 6px 12px;
		border: 1px solid #ddd;
		border-radius: 6px;
		background-color: #fff;
		cursor: pointer;
		border: 1px solid #eee !important;
	}

	.multiselect-container .input-group {
		flex-wrap: nowrap !important;
		border: 1px solid #eee;
		border-radius: 4px;
		margin: 5px 10px;
		padding: 2px 6px;
	}

	.multiselect-container {
		width: 100% !important;
		max-height: 300px;
		overflow-y: auto;
	}

		.multiselect-container li input[type="radio"] {
			display: none;
		}

		.multiselect-container li:not(.multiselect-group) a label {
			padding-left: 10px;
			cursor: pointer;
			display: block;
			width: 100%;
		}

		.multiselect-container > li {
			transition: background-color 0.2s ease-in-out;
		}

			.multiselect-container > li:hover {
				background: #f5f5f5;
			}


		.multiselect-container li a {
			display: block !important;
			width: 100%;
			padding: 6px 12px;
			color: #333;
			text-decoration: none;
		}

			.multiselect-container li a:hover {
				background-color: #e9ecef;
				color: #000;
			}

	#TransportDriverInUser {
		background: #e9ecef !important;
	}

	.transportExpenseAmount {
		border: 1px solid red !important;
	}

	#totalUserCount {
		font-size: 13px;
	}
</style>

<div class="container-fluid">
	<partial name="_PageHeader" model="Model"></partial>
</div>

<div class="container-fluid">
	<div id="stickyHeader" class="card-header px-2 sticky-top rounded"
		 style="min-height: 50px; z-index: 1020;">
		<partial name="_Toolbars" model="new ToobarModel() { Title = Model.Breadcrumb, Code = Model.Code, Name = Model.Setup.TEDID }" />
	</div>
	<input type="hidden" id="TransportExpenseAutoId" />
	<div class="card my-3 py-3">
		<div class="container mt-4">
			<fieldset class="border rounded-3 p-3">
				<legend class="float-none w-auto px-2 fs-6 fw-bold text-nowrap">Main Information</legend>

				<div class="row mb-3">
					<div class="col-6 d-flex align-items-center">
						<label class="col-sm-3 col-form-label pe-0 text-end fw-bold text-nowrap">Transport No.<span class="text-danger">*</span></label>
						<div class="col-9">
							<select class="form-select form-select-sm" id="TransportNoId">
								<option value="">--Select Employee--</option>
							</select>
						</div>
					</div>
					<div class="col-6 d-flex align-items-center readOnly">
						<label class="col-sm-3 col-form-label pe-0 text-end fw-bold text-nowrap">Transport Type</label>
						<div class="col-9">
							<select class="form-select form-select-sm" id="TransportTypeDisable" disabled>
								<option value="">--Select Employee--</option>
							</select>
						</div>
					</div>
				</div>

				<div class="row mb-3">
					<div class="col-6 d-flex align-items-center">
						<label class="col-sm-3 col-form-label pe-0 text-end fw-bold text-nowrap">Driver</label>
						<div class="col-9">
							<select class="form-select form-select-sm" id="TransportDriverDisable" disabled>
								<option value="">--Select Employee--</option>
							</select>
						</div>
					</div>
					<div class="col-6 d-flex align-items-center">
						<label class="col-sm-3 col-form-label pe-0 text-end fw-bold text-nowrap">Phone</label>
						<div class="col-9">
							<input type="text" class="form-control form-control-sm" placeholder="--Enter Phone--" id="TransportDriverPhone" value="" readonly />
						</div>
					</div>
				</div>
				<div class="row mb-3">
					<div class="col-6 d-flex align-items-center">
						<label class="col-sm-3 col-form-label pe-0 text-end fw-bold text-nowrap">User</label>

						<div class="col-9 position-relative">
							<select class="form-select form-select-sm pe-5" id="TransportDriverInUser"></select>
							<span id="totalUserCount"
								  class="badge fw-lighter text-black position-absolute top-50 end-0 translate-middle-y me-2">
							</span>
						</div>


					</div>
					<div class="col-6">
					</div>
				</div>
				<hr class="w-50 mb-1" />
				<div class="row mb-3">
					<div class="col-6 d-flex align-items-center">

						<label class="col-sm-3 col-form-label pe-0 text-end fw-bold text-nowrap">TE_ID</label>
						<div class="col-9">
							<input type="text" class="form-control form-control-sm" id="teid" value="" readonly />
						</div>
					</div>
					<div class="col-6 d-flex align-items-center">
						<label class="col-sm-3 col-form-label pe-0 text-end fw-bold text-nowrap">Data<span class="text-danger">*</span></label>
						<div class="col-9">
							<input type="date" class="form-control form-control-sm" id="teDate" name="teDate" value="" />
						</div>
					</div>
				</div>


			</fieldset>
		</div>



	</div>
	<div class="card my-3 py-3">
		<partial name="_Setup" model="Model.Details" />
		<div class="row py-2">
			<div class="col-12 col-md-6">
				<hr />
				<div class="d-flex align-items-center justify-content-center align-items-center">
					Create Date:<span class="createDate ps-1"></span>
				</div>
			</div>
			<div class="col-12 col-md-6">
				<hr />
				<div class="d-flex align-items-center justify-content-center align-items-center">
					Last Update Date:<span class="updateDate ps-1"></span>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="container-fluid">
	<div class="card p-2">
		<partial name="_TransportExpenseGridDetails"></partial>
	</div>
</div>
<div class="container-fluid">
	<div class="card p-2">
		<partial name="_Grid"></partial>
	</div>
</div>



@section Scripts {
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}
	<!-- Font Awesome 6 -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">


	<!-- jQuery (load first) -->
	<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

	<!-- Bootstrap 5 JS Bundle -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">


	<!-- Bootstrap Multiselect (WORKING VERSION) -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.15/css/bootstrap-multiselect.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.15/js/bootstrap-multiselect.min.js"></script>

	<!-- DataTable JS -->
	<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>

	<!-- Flatpickr CSS and JS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

	<!-- Your custom script (load AFTER all dependencies) -->
	<script src="~/js/pages/HRMTransportExpenseEntry.js"></script>

	<!-- Initialize with proper checking -->
	<script type="text/javascript">
		$(document).ready(function() {

			// Wait a bit for all scripts to load
			setTimeout(function() {
				if (typeof $.fn.multiselect !== 'undefined') {
					$.HRMTransportExpenseEntryJs({
						baseUrl: '@Url.Action("Index", "HRMTransportExpenseEntry")',
						load: function () {
						}
					});
				} else {					
					alert('Error: Bootstrap Multiselect plugin failed to load. Please refresh the page.');
				}
			}, 500);
		});

		if (typeof pdfjsLib !== 'undefined') {
			pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';
		}
	</script>
}